# Maintainer: Vikash Gupta <your-email@example.com>
# Contributor: Your Name <contributor-email@example.com>

pkgname=libdsa
pkgver=1.0.0
pkgrel=1
pkgdesc="A comprehensive C library for Data Structures and Algorithms"
arch=('x86_64' 'i686' 'armv6h' 'armv7h' 'aarch64')
url="https://github.com/Vortex-16/C"
license=('MIT')
depends=('glibc')
makedepends=('make' 'gcc')
optdepends=('make: for building from source')
provides=('libdsa' 'libdsa.so')
source=("https://github.com/Vortex-16/C/archive/refs/tags/v${pkgver}.tar.gz")
sha256sums=('SKIP')  # Will be calculated after first submission
options=('staticlibs')

build() {
    cd "C-${pkgver}/libDSA"
    make clean
    make static
    make shared
}

check() {
    cd "C-${pkgver}/libDSA"
    make run-all
}

package() {
    cd "C-${pkgver}/libDSA"
    
    # Install libraries
    install -Dm644 build/libdsa.a "${pkgdir}/usr/lib/libdsa.a"
    install -Dm755 build/libdsa.so "${pkgdir}/usr/lib/libdsa.so"
    
    # Install headers
    install -Dm644 include/libdsa.h "${pkgdir}/usr/include/libdsa/libdsa.h"
    install -Dm644 include/dsa_array.h "${pkgdir}/usr/include/libdsa/dsa_array.h"
    install -Dm644 include/dsa_linked_list.h "${pkgdir}/usr/include/libdsa/dsa_linked_list.h"
    install -Dm644 include/dsa_stack.h "${pkgdir}/usr/include/libdsa/dsa_stack.h"
    install -Dm644 include/dsa_queue.h "${pkgdir}/usr/include/libdsa/dsa_queue.h"
    
    # Install documentation
    install -Dm644 README.md "${pkgdir}/usr/share/doc/libdsa/README.md"
    install -Dm644 LICENSE "${pkgdir}/usr/share/licenses/libdsa/LICENSE"
    install -Dm644 docs/API.md "${pkgdir}/usr/share/doc/libdsa/API.md"
    install -Dm644 docs/GETTING_STARTED.md "${pkgdir}/usr/share/doc/libdsa/GETTING_STARTED.md"
    install -Dm644 CONTRIBUTING.md "${pkgdir}/usr/share/doc/libdsa/CONTRIBUTING.md"
    install -Dm644 CHANGELOG.md "${pkgdir}/usr/share/doc/libdsa/CHANGELOG.md"
}
